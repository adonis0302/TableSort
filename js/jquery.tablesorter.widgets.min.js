/* TableSorter 2.0 Widgets - updated 11/7/2011 */
(function(c){
c.tablesorter.addWidget({id:"uitheme",format:function(f){var b,a,g,e=f.config,d=["ui-icon-arrowthick-2-n-s","ui-icon-arrowthick-1-s","ui-icon-arrowthick-1-n"];e.widgetUitheme&&e.widgetUitheme.hasOwnProperty("css")&&(d=e.widgetUitheme.css||d);g=d.join(" ");e.debug&&(b=new Date);c(f).is(".ui-theme")||(c(f).addClass("ui-widget ui-widget-content ui-corner-all ui-theme"),c.each(e.headerList,function(){c(this).addClass("ui-widget-header ui-corner-all").append('<span class="ui-icon"/>').hover(function(){c(this).addClass("ui-state-hover")}, function(){c(this).removeClass("ui-state-hover")})}));c.each(e.headerList,function(b){e.headers[b]&&e.headers[b].sorter===false?c(this).find("span.ui-icon").removeClass(g+" ui-icon"):(a=c(this).is("."+e.cssAsc)?d[1]:c(this).is("."+e.cssDesc)?d[2]:c(this).is("."+e.cssHeader)?d[0]:"",c(this)[a===d[0]?"removeClass":"addClass"]("ui-state-active").find("span.ui-icon").removeClass(g).addClass(a))});e.debug&&c.tablesorter.benchmark("Applying uitheme widget",b)}});
c.tablesorter.addWidget({id:"columns",format:function(f){var b, a,g,e,d=f.config,i=d.sortList,h=i.length,j=["primary","secondary","tertiary"];d.widgetColumns&&d.widgetColumns.hasOwnProperty("css")&&(j=d.widgetColumns.css||j);g=j.length-1;e=j.join(" ");d.debug&&(a=new Date);i&&i[0]&&c("tr:visible",f.tBodies[0]).each(function(a){b=c(this).children().removeClass(e);b.eq(i[0][0]).addClass(j[0]);if(h>1)for(a=1;a<h;a++)b.eq(i[a][0]).addClass(j[a]||j[g])});d.debug&&c.tablesorter.benchmark("Applying Columns widget",a)}});
c.tablesorter.addWidget({id:"filter",format:function(f){if(!f.config.filtering){var b, a,g,e,d,i,h=f.config,j=h.headerList.length,k=c(f),f='<tr class="filters">',l;h.debug&&(l=new Date);for(b=0;b<j;b++)f+='<td><input type="text" class="filter" data-col="'+b+'" style="',f+=h.headers[b]&&"filter"in h.headers[b]&&h.headers[b].filter===false||c(h.headerList[b]).is(".filter-false")?"display:none":"",f+='"></td>';k.find("thead").append(f+="</tr>").find(".filter").bind("keyup",function(){a=k.find(".filter").map(function(){return(c(this).val()||"").toLowerCase()}).get();a.join("")===""?k.find("tr").show(): k.find("tbody").find("tr:not(.expand-child)").each(function(){g=true;d=c(this).nextUntil("tr:not(.expand-child)");e=d.length&&(typeof h.widgetFilterChildRows!=="undefined"?h.widgetFilterChildRows:1)?d.text():"";i=c(this).find("td");for(b=0;b<j;b++)a[b]!==""&&(i.eq(b).text()+e).toLowerCase().indexOf(a[b])>=0?g=g?true:false:a[b]!==""&&(g=false);c(this)[g?"show":"hide"]();if(d.length)d[g?"show":"hide"]()});k.trigger("applyWidgets")});h.filtering=true;h.debug&&c.tablesorter.benchmark("Applying Filter widget", l)}}});
c.tablesorter.addWidget({id:"stickyHeaders",format:function(f){if(!c(f).find(".stickyHeader").length){var b=c(window),a=c(f).find("thead"),g=a.find("tr").children(),e=parseInt(g.eq(0).css("border-left-width"),10),d=a.find("tr").clone().addClass("stickyHeader").css({width:a.outerWidth()+e*2,position:"fixed",top:0,marginLeft:-e,visibility:"hidden",zIndex:10}),i=d.children();c(f).bind("sortEnd",function(a,b){var d=c(b).find("thead tr"),f=d.filter(".stickyHeader").children();d.filter(":not(.stickyHeader)").children().each(function(a){f.eq(a).attr("class", c(this).attr("class"))})});g.each(function(a){var b=c(this);i.eq(a).width(b.width()).bind("click",function(a){b.trigger(a)}).bind("mousedown",function(){this.onselectstart=function(){return false};return false})});a.prepend(d);b.scroll(function(){var a=c(f),e=a.offset(),g=b.scrollTop(),a=g>e.top&&g<e.top+a.find("tbody").height()?"visible":"hidden";d.css("visibility",a)}).resize(function(){d.css({width:a.outerWidth()+e*2});i.each(function(a){c(this).width(g.eq(a).width())})})}}});
c.tablesorter.addWidget({id:"resizable", format:function(f){if(!f.config.resizable){var b,a=f.config,g=a.headerList,e=g.length,d=function(){a.resizable_position=0;a.resizable_target=null;c(window).trigger("resize")};a.resizable_target=null;a.resizable_position=0;for(b=1;b<e;b++)c(g[b]).append('<div class="resizer" style="cursor:w-resize;position:absolute;height:100%;width:20px;left:-20px;top:0;z-index:1;"></div>').wrapInner('<div style="position:relative;height:100%;width:100%"></div>').find(".resizer").bind("mousedown",function(b){a.resizable_target= c(b.target).closest("th");a.resizable_position=b.pageX}).end().bind("mousemove",function(c){if(!(a.resizable_position===0||typeof a.resizable_target===null)){var b=c.pageX-a.resizable_position,d=a.resizable_target.closest("th").prev();if(!(a.resizable_target.width()<-b||d&&d.width()<=b))d.width(d.width()+b),a.resizable_position=c.pageX}}).bind("mouseup",function(){d();return false});c(f).find("thead").bind("mouseup mouseleave",function(){d()});a.resizable=true}}})
})(jQuery);